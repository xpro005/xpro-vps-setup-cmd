#!/bin/bash

# COLORS - RED THEME
R="\e[1;31m" # Bright Red
G="\e[1;32m" # Green
Y="\e[1;33m" # Yellow
B="\e[1;34m" # Blue
C="\e[1;36m" # Cyan
M="\e[1;35m" # Magenta
W="\e[1;37m" # White
N="\e[0m"    # Reset

# JISHNU NETWORK ASCII ART
print_jishnu_logo() {
    echo -e "\n${R}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e "${R}â•‘${W} â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•— â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ•— â–ˆâ–ˆâ•— ${R}â•‘${N}"
    echo -e "${R}â•‘${W} â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ ${R}â•‘${N}"
    echo -e "${R}â•‘${W} â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ ${R}â•‘${N}"
    echo -e "${R}â•‘${W} â–ˆâ–ˆ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ•‘ ${R}â•‘${N}"
    echo -e "${R}â•‘${W} â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• ${R}â•‘${N}"
    echo -e "${R}â•‘${W}  â•šâ•â•â•â•â• â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•â•  ${R}â•‘${N}"
    echo -e "${R}â•‘${Y}               N E T W O R K                        ${R}â•‘${N}"
    echo -e "${R}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
    echo -e "${Y}               Made by Jishnu ${N}\n"
}

print_box() {
    local text="$1"
    local color="$2"
    local width=60
    local padding=$(( (width - ${#text} - 2) / 2 ))
    echo -e "${color}â•”$(printf 'â•%.0s' $(seq 1 $((width-2))))â•—${N}"
    printf "${color}â•‘%*s${W}%s${color}%*sâ•‘${N}\n" $padding "" "$text" $((padding - ((${#text} % 2) ? 1 : 0))) ""
    echo -e "${color}â•š$(printf 'â•%.0s' $(seq 1 $((width-2))))â•${N}"
}

print_header() {
    clear
    print_jishnu_logo
    echo -e "${R}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
    echo -e "${W}             DEVELOPMENT MANAGEMENT CONSOLE                 ${N}"
    echo -e "${R}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
}

print_option() {
    local num="$1"
    local text="$2"
    local color="$3"
    echo -e " ${color}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e " ${color}â•‘${W} [${R}$num${W}] ${Y}$text$(printf '%*s' $((40 - ${#text}))) ${color}â•‘${N}"
    echo -e " ${color}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
}

print_status() {
    local text="$1"
    local color="$2"
    echo -e "\n${R}â–¶â–¶${color} ${text}${N}\n"
}

print_divider() {
    echo -e "${R}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
}

print_footer() {
    echo -e "${R}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${N}"
    echo -e "${R}â”‚${W}        Jishnu Network Â© 2024 - All Rights Reserved     ${R}â”‚${N}"
    echo -e "${R}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${N}\n"
}

# MAIN MENU LOOP
while true; do
    print_header
    echo -e "${R}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e "${R}â•‘${Y}                    MAIN OPTIONS                            ${R}â•‘${N}"
    echo -e "${R}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
    
    print_option "1" "ğŸš€ GitHub VPS Maker" "$R"
    print_option "2" "ğŸ› ï¸  IDX Tool Setup" "$R"
    print_option "3" "âš¡ IDX VPS Maker" "$R"
    print_option "4" "âŒ Exit" "$R"
    
    print_divider
    echo -ne "${R}â–¶â–¶${W} Select Option [${R}1-4${W}] : ${Y}"
    read op
    echo -ne "${N}"

    case $op in
        1)
            clear
            print_jishnu_logo
            print_status "ğŸš€ GITHUB VPS MAKER" "$R"
            print_divider
            RAM=15000
            CPU=4
            DISK_SIZE=100G
            CONTAINER_NAME=hopingboyz
            IMAGE_NAME=hopingboyz/debain12
            VMDATA_DIR="$PWD/vmdata"
            
            echo -e "${R}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
            echo -e "${R}â•‘${W}               GITHUB VPS CONFIGURATION                     ${R}â•‘${N}"
            echo -e "${R}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
            
            echo -e "${Y}ğŸ“‚ Creating VM data directory...${N}"
            mkdir -p "$VMDATA_DIR"
            
            echo -e "\n${R}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${N}"
            echo -e "${R}â”‚${W} ${G}RAM${W}       : ${Y}$RAM MB${W}                                 ${R}â”‚${N}"
            echo -e "${R}â”‚${W} ${G}CPU${W}       : ${Y}$CPU cores${W}                              ${R}â”‚${N}"
            echo -e "${R}â”‚${W} ${G}DISK SIZE${W} : ${Y}$DISK_SIZE${W}                               ${R}â”‚${N}"
            echo -e "${R}â”‚${W} ${G}NAME${W}      : ${Y}$CONTAINER_NAME${W}                          ${R}â”‚${N}"
            echo -e "${R}â”‚${W} ${G}IMAGE${W}     : ${Y}$IMAGE_NAME${W}                             ${R}â”‚${N}"
            echo -e "${R}â”‚${W} ${G}TYPE${W}      : ${Y}GitHub Docker VPS${W}                      ${R}â”‚${N}"
            echo -e "${R}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${N}\n"
            
            echo -e "${R}â–¶â–¶${W} Launching GitHub VPS...${N}"
            docker run -it --rm \
                --name "$CONTAINER_NAME" \
                --device /dev/kvm \
                -v "$VMDATA_DIR":/vmdata \
                -e RAM="$RAM" \
                -e CPU="$CPU" \
                -e DISK_SIZE="$DISK_SIZE" \
                "$IMAGE_NAME"
                
            echo -e "\n${R}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
            echo -e "${R}â–¶â–¶${W} GitHub VPS session ended.${N}"
            echo -ne "${R}â–¶â–¶${W} Press Enter to return to main menu...${N}"
            read
            ;;
        2)
            clear
            print_jishnu_logo
            print_status "ğŸ› ï¸  IDX TOOL SETUP" "$R"
            print_divider
            
            echo -e "${Y}ğŸ§¹ Cleaning up old files...${N}"
            cd $HOME
            rm -rf myapp flutter
            
            mkdir -p vps123 && cd vps123
            if [ ! -d ".idx" ]; then
                echo -e "${G}ğŸ“‚ Creating .idx directory...${N}"
                mkdir .idx && cd .idx
                echo -e "${C}ğŸ“ Creating dev.nix configuration...${N}"
                cat <<EOF > dev.nix
{ pkgs, ... }: {
  channel = "stable-24.05";
  packages = with pkgs; [ unzip openssh git qemu_kvm sudo cdrkit cloud-utils qemu ];
  env = { EDITOR = "nano"; };
  idx = {
    extensions = [ "Dart-Code.flutter" "Dart-Code.dart-code" ];
    workspace = { onCreate = { }; onStart = { }; };
    previews = { enable = false; };
  };
}
EOF
                echo -e "\n${G}âœ… IDX TOOL SETUP COMPLETE!${N}"
            else
                echo -e "${Y}âš ï¸  IDX Tool already setup â€” skipping.${N}"
            fi
            echo -ne "${R}â–¶â–¶${W} Press Enter to return...${N}"
            read
            ;;
        3)
            clear
            print_jishnu_logo
            print_status "âš¡ IDX VPS MAKER" "$R"
            print_divider
            echo -e "${C}ğŸ“¡ Connecting to Jishnu Network...${N}"
            bash <(curl -s https://rough-hall-1486.jishnumondal32.workers.dev)
            echo -ne "${R}â–¶â–¶${W} Press Enter to return...${N}"
            read
            ;;
        4)
            clear
            print_jishnu_logo
            print_footer
            echo -e "${Y}ğŸ‘‹ Goodbye!${N}\n"
            sleep 2
            exit 0
            ;;
        *)
            echo -e "${R}âŒ INVALID OPTION! Please choose 1-4.${N}"
            sleep 2
            ;;
    esac
done
